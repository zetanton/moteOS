# Cargo cross-compilation configuration for moteOS
# See docs/TECHNICAL_SPECIFICATIONS.md Section 3.8.7-8

# AArch64 (ARM64) target configuration
[target.aarch64-unknown-uefi]
# Linker for ARM64 cross-compilation
# Use rust-lld (Rust's built-in linker) which works on all platforms
# This avoids needing cross-compilation toolchains installed
linker = "rust-lld"
# Alternative options (if rust-lld doesn't work):
# On macOS with Homebrew: brew install aarch64-elf-gcc, then use:
# linker = "aarch64-elf-ld"
# On Linux: aarch64-linux-gnu-ld
# linker = "aarch64-linux-gnu-ld"

# Linker flags for ARM64 UEFI
# Note: The UEFI target may handle linking automatically
# If a custom linker script is needed, uncomment and adjust the path
# rustflags = [
#     "-C", "link-arg=-Tlinker-aarch64.ld",
#     "-C", "link-arg=-nostdlib",
#     "-C", "link-arg=-Wl,--gc-sections",
#     "-C", "link-arg=-Wl,-z,max-page-size=4096",  # 4KB page size for ARM64 MMU
# ]

# x86_64 target configuration (for cross-compilation)
[target.x86_64-unknown-uefi]
# Standard x86_64 UEFI build
# No custom linker needed - uses default Rust UEFI toolchain
# The UEFI target handles linking automatically

# Build configuration
[build]
# Default target for builds (can be overridden with --target)
# target = "x86_64-unknown-uefi"
